<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Lab3 - Web-labs</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0441\u0442\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django \u0418 Django REST Framework", url: "#_top", children: [
          ]},
          {title: "Rad", url: "#rad", children: [
          ]},
          {title: "\u0421\u0445\u0435\u043c\u0430 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445", url: "#_1", children: [
          ]},
          {title: "serializers", url: "#serializers", children: [
          ]},
          {title: "views", url: "#views", children: [
          ]},
          {title: "urls", url: "#urls", children: [
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Practice3/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Practice3/" class="btn btn-xs btn-link">
        Practice3
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Lab2/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Lab2/" class="btn btn-xs btn-link">
        Lab2
      </a>
    </div>
    
  </div>

    

    <h3 id="django-django-rest-framework">Реализация серверной чсти приложения средствами Django И Django REST Framework</h3>
<blockquote>
<h3 id="rad">Rad</h3>
<p>– платформа, где любители чтения могут обмениваться рекомендациями, обсуждать книги, создавать списки прочитанных и планируемых книг, а также находить людей с похожими литературными интересами.</p>
</blockquote>
<p>Каталог книг:</p>
<ul>
<li>Пользователи могут добавлять книги в общий каталог, включая информацию о названии, авторе, обложке и кратком описании.</li>
<li>Поиск и фильтрация книг по различным критериям.</li>
</ul>
<p>Профили пользователей:</p>
<ul>
<li>Пользователи создают свои профили, где могут указывать свои любимые жанры, авторов и т.д.</li>
<li>Возможность добавлять друзей и следить за их активностью.</li>
</ul>
<p>Обзоры и рейтинги:</p>
<ul>
<li>Возможность оставлять обзоры и ставить рейтинги книгам.</li>
<li>Топ-листы книг по различным категориям.</li>
</ul>
<p>Книжные клубы:</p>
<ul>
<li>Создание виртуальных клубов для обсуждения книг определенного жанра, автора или темы.</li>
<li>Посты, комментарии и обсуждения внутри клубов.</li>
</ul>
<p>Персональные списки:</p>
<ul>
<li>Создание списков "Прочитано", "Хочу прочитать", "Читаю сейчас" и т.д.</li>
</ul>
<h3 id="_1">Схема базы данных</h3>
<p><img alt="Models" src="../img/Lab3.1.png" /></p>
<p>Book (Книга):</p>
<ul>
<li>title: Название книги (CharField).</li>
<li>author: Автор книги (CharField).</li>
<li>cover: Изображение обложки книги (ImageField).</li>
<li>description: Описание книги (TextField).</li>
</ul>
<p>UserProfile (Профиль пользователя):</p>
<ul>
<li>user: Связь с моделью пользователя Django (OneToOneField).</li>
<li>favorite_genres: Любимые жанры пользователя (CharField).</li>
</ul>
<p>Review (Обзор):</p>
<ul>
<li>user: Связь с моделью пользователя Django (ForeignKey).</li>
<li>book: Связь с моделью книги (ForeignKey).</li>
<li>rating: Рейтинг обзора (PositiveIntegerField).</li>
<li>text: Текст обзора (TextField).</li>
</ul>
<p>BookList (Список книг):</p>
<ul>
<li>user: Связь с моделью пользователя Django (ForeignKey).</li>
<li>book: Связь с моделью книги (ForeignKey).</li>
<li>list_type: Тип списка (CharField), например, "Прочитано", "Хочу прочитать", "Читаю сейчас" и т.д.</li>
</ul>
<p>BookClub (Книжный клуб):</p>
<ul>
<li>name: Название книжного клуба (CharField).</li>
<li>description: Описание книжного клуба (TextField).</li>
</ul>
<p>ClubMembership (Членство в клубе):</p>
<ul>
<li>user: Связь с моделью пользователя Django (ForeignKey).</li>
<li>club: Связь с моделью книжного клуба (ForeignKey).</li>
</ul>
<p>ClubPost (Пост в клубе):</p>
<ul>
<li>user: Связь с моделью пользователя Django (ForeignKey).</li>
<li>club: Связь с моделью книжного клуба (ForeignKey).</li>
<li>text: Текст поста в клубе (TextField).</li>
</ul>
<p>Comment (Комментарий):</p>
<ul>
<li>user: Связь с моделью пользователя Django (ForeignKey).</li>
<li>post: Связь с моделью поста в клубе (ForeignKey).</li>
<li>text: Текст комментария (TextField).</li>
</ul>
<pre><code class="language-python">from django.db import models
from django.contrib.auth.models import User

class Book(models.Model):
    title = models.CharField(max_length=255)
    author = models.CharField(max_length=255)
    cover = models.ImageField(upload_to='book_covers/')
    description = models.TextField()

class UserProfile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    favorite_genres = models.CharField(max_length=255)

class Review(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    book = models.ForeignKey(Book, on_delete=models.CASCADE)
    rating = models.PositiveIntegerField()
    text = models.TextField()

class BookList(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    book = models.ForeignKey(Book, on_delete=models.CASCADE)
    list_type = models.CharField(max_length=255)  # Прочитано, Хочу прочитать, Читаю сейчас и т.д.

class BookClub(models.Model):
    name = models.CharField(max_length=255)
    description = models.TextField()

class ClubMembership(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    club = models.ForeignKey(BookClub, on_delete=models.CASCADE)

class ClubPost(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    club = models.ForeignKey(BookClub, on_delete=models.CASCADE)
    text = models.TextField()

class Comment(models.Model):
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    post = models.ForeignKey(ClubPost, on_delete=models.CASCADE)
    text = models.TextField()
</code></pre>
<h3 id="serializers">serializers</h3>
<pre><code>from rest_framework import serializers
from .models import Book, UserProfile, Review, BookList, BookClub, ClubMembership, ClubPost, Comment

class BookSerializer(serializers.ModelSerializer):
    class Meta:
        model = Book
        fields = '__all__'

class UserProfileSerializer(serializers.ModelSerializer):
    class Meta:
        model = UserProfile
        fields = '__all__'

class ReviewSerializer(serializers.ModelSerializer):
    class Meta:
        model = Review
        fields = '__all__'

class BookListSerializer(serializers.ModelSerializer):
    class Meta:
        model = BookList
        fields = '__all__'

class BookClubSerializer(serializers.ModelSerializer):
    class Meta:
        model = BookClub
        fields = '__all__'

class ClubMembershipSerializer(serializers.ModelSerializer):
    class Meta:
        model = ClubMembership
        fields = '__all__'

class ClubPostSerializer(serializers.ModelSerializer):
    class Meta:
        model = ClubPost
        fields = '__all__'

class CommentSerializer(serializers.ModelSerializer):
    class Meta:
        model = Comment
        fields = '__all__'
</code></pre>
<h3 id="views">views</h3>
<pre><code>from rest_framework import viewsets
from .models import Book, UserProfile, Review, BookList, BookClub, ClubMembership, ClubPost, Comment
from .serializers import BookSerializer, UserProfileSerializer, ReviewSerializer, BookListSerializer, \
    BookClubSerializer, ClubMembershipSerializer, ClubPostSerializer, CommentSerializer

class BookViewSet(viewsets.ModelViewSet):
    queryset = Book.objects.all()
    serializer_class = BookSerializer

class UserProfileViewSet(viewsets.ModelViewSet):
    queryset = UserProfile.objects.all()
    serializer_class = UserProfileSerializer

class ReviewViewSet(viewsets.ModelViewSet):
    queryset = Review.objects.all()
    serializer_class = ReviewSerializer

class BookListViewSet(viewsets.ModelViewSet):
    queryset = BookList.objects.all()
    serializer_class = BookListSerializer

class BookClubViewSet(viewsets.ModelViewSet):
    queryset = BookClub.objects.all()
    serializer_class = BookClubSerializer

class ClubMembershipViewSet(viewsets.ModelViewSet):
    queryset = ClubMembership.objects.all()
    serializer_class = ClubMembershipSerializer

class ClubPostViewSet(viewsets.ModelViewSet):
    queryset = ClubPost.objects.all()
    serializer_class = ClubPostSerializer

class CommentViewSet(viewsets.ModelViewSet):
    queryset = Comment.objects.all()
    serializer_class = CommentSerializer
</code></pre>
<h3 id="urls">urls</h3>
<pre><code>from django.urls import path, include
from django.contrib import admin
from rest_framework.routers import DefaultRouter
from Rad_app.views import BookViewSet, UserProfileViewSet, ReviewViewSet, BookListViewSet, \
    BookClubViewSet, ClubMembershipViewSet, ClubPostViewSet, CommentViewSet

router = DefaultRouter()
router.register(r'books', BookViewSet)
router.register(r'userprofiles', UserProfileViewSet)
router.register(r'reviews', ReviewViewSet)
router.register(r'booklists', BookListViewSet)
router.register(r'bookclubs', BookClubViewSet)
router.register(r'clubmemberships', ClubMembershipViewSet)
router.register(r'clubposts', ClubPostViewSet)
router.register(r'comments', CommentViewSet)

urlpatterns = [
    path("admin/", admin.site.urls),
]
</code></pre>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Practice3/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Practice3/" class="btn btn-xs btn-link">
        Practice3
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Lab2/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Lab2/" class="btn btn-xs btn-link">
        Lab2
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>